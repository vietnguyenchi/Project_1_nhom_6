<?php 
    namespace Duan1\Nhom6\Controllers\Admin;

    use Duan1\Nhom6\Controller;
    use Duan1\Nhom6\Models\Category;
    use Duan1\Nhom6\Models\Feature;

    class FeatureController extends Controller {
        public function index() {
            
            $features = (new Feature)->all();

            $this->renderAdmin('features', ['features' => $features]);
        }

        public function add() {
            $features = (new Feature)->all();

            if (isset($_POST['add_feature'])) {
                $data = ['name' => $_POST['feature_name']];

                (new Feature())->insert($data);

                header('Location: /admin/features');
            }

            $this->renderAdmin('features', ['features' => $features]);
        }

        public function delete() {
            $conditions = [
                ['id', '=', $_GET['id']],
            ];
    
            (new Feature())->delete($conditions);
    
            header('Location: /admin/features');
        }

        public function update() {
            
            if (isset($_POST["update_feature"])) { 
                $data = [
                    'name' => $_POST['feature_name']
                ];
                
                $id = $_POST['feature_id'];

                $conditions = [
                    ['id', '=', $id],
                ];
                
                (new Feature())->update($data, $conditions);
            }

            $features = (new Feature)->all();
    
            $this->renderAdmin('features', ['features' => $features]);
        }    
    }
?>